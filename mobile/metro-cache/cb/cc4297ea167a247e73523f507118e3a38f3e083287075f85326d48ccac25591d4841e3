{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/interopRequireWildcard","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/defineProperty","data":{"isAsync":false}},{"name":"@babel/runtime/regenerator","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"isAsync":false}},{"name":"react","data":{"isAsync":false}},{"name":"react-native-vector-icons/MaterialIcons","data":{"isAsync":false}},{"name":"react-navigation","data":{"isAsync":false}},{"name":"../../services/api","data":{"isAsync":false}},{"name":"../../components/Background","data":{"isAsync":false}},{"name":"../../components/Appointment","data":{"isAsync":false}},{"name":"./styles","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n\n  var _interopRequireWildcard = _$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/interopRequireWildcard\");\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = void 0;\n\n  var _defineProperty2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[2], \"@babel/runtime/helpers/defineProperty\"));\n\n  var _regenerator = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[3], \"@babel/runtime/regenerator\"));\n\n  var _slicedToArray2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[4], \"@babel/runtime/helpers/slicedToArray\"));\n\n  var _react = _interopRequireWildcard(_$$_REQUIRE(_dependencyMap[5], \"react\"));\n\n  var _MaterialIcons = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[6], \"react-native-vector-icons/MaterialIcons\"));\n\n  var _reactNavigation = _$$_REQUIRE(_dependencyMap[7], \"react-navigation\");\n\n  var _api = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[8], \"../../services/api\"));\n\n  var _Background = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[9], \"../../components/Background\"));\n\n  var _Appointment = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[10], \"../../components/Appointment\"));\n\n  var _styles = _$$_REQUIRE(_dependencyMap[11], \"./styles\");\n\n  var _jsxFileName = \"/home/joao/aulas/modulo10/src/pages/Dashboard/index.js\";\n\n  function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\n  function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n  function Dashboard(isFocused) {\n    var _useState = (0, _react.useState)([]),\n        _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n        appointments = _useState2[0],\n        setAppointments = _useState2[1];\n\n    function loadAppointments() {\n      var response;\n      return _regenerator.default.async(function loadAppointments$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regenerator.default.awrap(_api.default.get('appointments'));\n\n            case 2:\n              response = _context.sent;\n              setAppointments(response.data);\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      });\n    }\n\n    (0, _react.useEffect)(function () {\n      if (isFocused) {\n        loadAppointments();\n      }\n    }, [isFocused]);\n\n    function handleCancel(id) {\n      var response;\n      return _regenerator.default.async(function handleCancel$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _regenerator.default.awrap(_api.default.delete(\"appointments/\" + id));\n\n            case 2:\n              response = _context2.sent;\n              setAppointments(appointments.map(function (appointment) {\n                return appointment.id === id ? _objectSpread({}, appointment, {\n                  canceled_at: response.data.canceled_at\n                }) : appointment;\n              }));\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      });\n    }\n\n    return _react.default.createElement(_Background.default, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38\n      }\n    }, _react.default.createElement(_styles.Container, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39\n      }\n    }, _react.default.createElement(_styles.Title, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40\n      }\n    }, \"Agendamentos\"), _react.default.createElement(_styles.List, {\n      data: appointments,\n      keyExtractor: function keyExtractor(item) {\n        return String(item.id);\n      },\n      renderItem: function renderItem(_ref) {\n        var item = _ref.item;\n        return _react.default.createElement(_Appointment.default, {\n          onCancel: function onCancel() {\n            return handleCancel(item.id);\n          },\n          data: item,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 45\n          }\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41\n      }\n    })));\n  }\n\n  Dashboard.navigationOptions = {\n    tabBarLabel: 'Agendamentos',\n    tabBarIcon: function tabBarIcon(_ref2) {\n      var tintColor = _ref2.tintColor;\n      return _react.default.createElement(_MaterialIcons.default, {\n        name: \"event\",\n        size: 20,\n        color: tintColor,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        }\n      });\n    }\n  };\n\n  var _default = (0, _reactNavigation.withNavigationFocus)(Dashboard);\n\n  exports.default = _default;\n});","map":[[17,0,1,0],[19,0,3,0],[21,0,4,0],[23,0,5,0],[25,0,6,0],[27,0,7,0],[29,0,9,0],[37,0,11,0],[37,11,11,9,"Dashboard"],[37,20,11,0],[37,21,11,19,"isFocused"],[37,30,11,0],[37,32,11,30],[38,0,11,30],[38,20,12,42],[38,41,12,51],[38,43,12,42],[38,44,11,30],[39,0,11,30],[40,0,11,30],[40,8,12,9,"appointments"],[40,20,11,30],[41,0,11,30],[41,8,12,23,"setAppointments"],[41,23,11,30],[43,0,13,2],[43,13,13,17,"loadAppointments"],[43,29,13,2],[44,0,13,2],[45,0,13,2],[46,0,13,2],[47,0,13,2],[48,0,13,2],[49,0,13,2],[50,0,13,2],[50,48,14,27,"api"],[50,61,14,31,"get"],[50,64,14,27],[50,65,14,35],[50,79,14,27],[50,80,13,2],[52,0,13,2],[53,0,14,10,"response"],[53,14,14,10,"response"],[53,22,13,2],[54,0,16,4,"setAppointments"],[54,14,16,4,"setAppointments"],[54,29,16,19],[54,30,16,20,"response"],[54,38,16,28],[54,39,16,29,"data"],[54,43,16,19],[54,44,16,4],[56,0,13,2],[57,0,13,2],[58,0,13,2],[59,0,13,2],[60,0,13,2],[61,0,13,2],[62,0,13,2],[64,0,18,2],[64,26,18,12],[64,38,18,18],[65,0,19,4],[65,10,19,8,"isFocused"],[65,19,19,4],[65,21,19,19],[66,0,20,6,"loadAppointments"],[66,8,20,6,"loadAppointments"],[66,24,20,22],[67,0,21,5],[68,0,22,3],[68,5,18,2],[68,7,22,5],[68,8,22,6,"isFocused"],[68,17,22,5],[68,18,18,2],[70,0,23,2],[70,13,23,17,"handleCancel"],[70,25,23,2],[70,26,23,30,"id"],[70,28,23,2],[71,0,23,2],[72,0,23,2],[73,0,23,2],[74,0,23,2],[75,0,23,2],[76,0,23,2],[77,0,23,2],[77,48,24,27,"api"],[77,61,24,31,"delete"],[77,67,24,27],[77,86,24,54,"id"],[77,88,24,27],[77,89,23,2],[79,0,23,2],[80,0,24,10,"response"],[80,14,24,10,"response"],[80,22,23,2],[81,0,26,4,"setAppointments"],[81,14,26,4,"setAppointments"],[81,29,26,19],[81,30,27,6,"appointments"],[81,42,27,18],[81,43,27,19,"map"],[81,46,27,6],[81,47,27,23],[81,57,27,23,"appointment"],[81,68,27,34],[82,0,27,34],[82,23,28,8,"appointment"],[82,34,28,19],[82,35,28,20,"id"],[82,37,28,8],[82,42,28,27,"id"],[82,44,28,8],[82,65,30,17,"appointment"],[82,76,28,8],[83,0,31,14,"canceled_at"],[83,18,31,14,"canceled_at"],[83,29,31,25],[83,31,31,27,"response"],[83,39,31,35],[83,40,31,36,"data"],[83,44,31,27],[83,45,31,41,"canceled_at"],[84,0,28,8],[84,21,33,12,"appointment"],[84,32,27,34],[85,0,27,34],[85,15,27,6],[85,16,26,19],[85,17,26,4],[87,0,23,2],[88,0,23,2],[89,0,23,2],[90,0,23,2],[91,0,23,2],[92,0,23,2],[93,0,23,2],[95,0,37,2],[95,11,38,4],[95,40,38,5],[95,59,38,4],[96,0,38,4],[97,0,38,4],[98,0,38,4],[99,0,38,4],[100,0,38,4],[100,7,39,6],[100,36,39,7],[100,53,39,6],[101,0,39,6],[102,0,39,6],[103,0,39,6],[104,0,39,6],[105,0,39,6],[105,7,40,8],[105,36,40,9],[105,49,40,8],[106,0,40,8],[107,0,40,8],[108,0,40,8],[109,0,40,8],[110,0,40,8],[110,22,39,6],[110,24,41,8],[110,53,41,9],[110,65,41,8],[111,0,42,10],[111,6,42,10],[111,10,42,14],[111,12,42,16,"appointments"],[111,24,41,8],[112,0,43,10],[112,6,43,10],[112,18,43,22],[112,20,43,24],[112,42,43,24,"item"],[112,46,43,28],[113,0,43,28],[113,15,43,32,"String"],[113,21,43,38],[113,22,43,39,"item"],[113,26,43,43],[113,27,43,44,"id"],[113,29,43,38],[113,30,43,28],[114,0,43,28],[114,7,41,8],[115,0,44,10],[115,6,44,10],[115,16,44,20],[115,18,44,22],[116,0,44,22],[116,12,44,25,"item"],[116,16,44,22],[116,24,44,25,"item"],[116,28,44,22],[117,0,44,22],[117,15,45,12],[117,44,45,13],[117,64,45,12],[118,0,45,25],[118,10,45,25],[118,18,45,33],[118,20,45,35],[119,0,45,35],[119,19,45,41,"handleCancel"],[119,31,45,53],[119,32,45,54,"item"],[119,36,45,58],[119,37,45,59,"id"],[119,39,45,53],[119,40,45,35],[120,0,45,35],[120,11,45,12],[121,0,45,64],[121,10,45,64],[121,14,45,68],[121,16,45,70,"item"],[121,20,45,12],[122,0,45,12],[123,0,45,12],[124,0,45,12],[125,0,45,12],[126,0,45,12],[126,10,44,22],[127,0,44,22],[127,7,41,8],[128,0,41,8],[129,0,41,8],[130,0,41,8],[131,0,41,8],[132,0,41,8],[132,6,39,6],[132,7,38,4],[132,8,37,2],[133,0,51,1],[135,0,53,0,"Dashboard"],[135,2,53,0,"Dashboard"],[135,11,53,9],[135,12,53,10,"navigationOptions"],[135,29,53,0],[135,32,53,30],[136,0,54,2,"tabBarLabel"],[136,4,54,2,"tabBarLabel"],[136,15,54,13],[136,17,54,15],[136,31,53,30],[137,0,55,2,"tabBarIcon"],[137,4,55,2,"tabBarIcon"],[137,14,55,12],[137,16,55,14],[138,0,55,14],[138,10,55,17,"tintColor"],[138,19,55,14],[138,28,55,17,"tintColor"],[138,37,55,14],[139,0,55,14],[139,13,56,4],[139,42,56,5],[139,64,56,4],[140,0,56,10],[140,8,56,10],[140,12,56,14],[140,14,56,15],[140,21,56,4],[141,0,56,23],[141,8,56,23],[141,12,56,27],[141,14,56,29],[141,16,56,4],[142,0,56,33],[142,8,56,33],[142,13,56,38],[142,15,56,40,"tintColor"],[142,24,56,4],[143,0,56,4],[144,0,56,4],[145,0,56,4],[146,0,56,4],[147,0,56,4],[147,8,55,14],[148,0,55,14],[149,0,53,30],[149,3,53,0],[151,17,59,15],[151,59,59,35,"Dashboard"],[151,68,59,15],[151,69]]},"type":"js/module"}]}